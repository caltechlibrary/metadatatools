---
title: development approach
---

# A note on development approach

I was dreading porting the Python code to TypeScript. I decided to follow a suggestion from my colleague [Tommy](https://github.com/t4k). This project is my experiment in using an LLM (ChatGPT) to asset in building the tools and modules I need. At present the code generated by ChatGPT 4 is at best a suggestion. In practice I've had to rewrite nearly all the generated examples to get them to work properly. I am not sure this actually saved any time but it was an interesting experiment, maybe someday this will be a reasonable approach (2024-12-05).

My LLM approach was to write a simple TypeScript program which generated a set of questions from a template string.  I saved the results to a file, did light editing and submit them to the ChatGPT 4. This resulted in a reference document, [chatgpt_dialog.md](chatgpt_dialog.md).

## Deno and TypeScript
 
Deno takes advantage of the flexibility of ESM (ECMAScript Modules). Each TypeScript file can use a common `deps.ts` to selectively import common functionality. A `mod.ts` is provided to export the entire module's public method and attributes. This approach means you can use the whole set of metadatatools module or selectively just the parts you need for your project.

Each identifier's validation and normalization methods are in their own module. This means if you only need to validate DOI then you can just include `doi.ts` and be done.

`<identifier_name>_record.ts` holds the varification method. Many of the organization behind the identifier scheme will let you check if an identifier is valid (registered) but require membership or other cost to actually retrieve useful metadata. Given the current state of the net with the ever growing legions of hostile bots it is not surprising to see previously public API duck behind some sort of authentication and access control. Still is that remains disappointing to me.

## Generating our reference documentatation

### LLM questions via code generation


~~~TypeScript
//
// This following generates a list of questions to feed into an LLM for code generation.
//
const identifier_types: object = {
    "ISBN": "ISBN",
    "ISSN": "ISSN",
    "DOI": "DOI",
    "ISNI": "ISNI",
    "ORCID": "ORCID",
    "ROR": "ROR",
    "ISTC": "ISTC (International Standard Text Code)",
    "handle": "handle identifier",
    "EAN": "EAN (International Article Number (EAN-13 or EAN-8))",
    "URL": "URL",
    "URI": "URI",
    "URN": "URL",
    "PURL": "PURL",
    "ADS": "ADS bibliographic code",
    "arXiv": "arXiv ID",
    "PMID": "PubMed ID",
    "PMCID": "PubMed Central ID",
    "GND": "GND Identifier",
    "SRA": "SRA accession identifier",
    "BioProject": "BioProject accession identifier",
    "BioSample": "BioSample accession identifier",
    "Ensembl": "Ensembl accession identifier",
    "UniProt": "UniProt accession identifier",
    "RefSeq": "RefSeq accession identifier",
    "FundRef": "FundRef ID",
    "Genome": "GenBank or RefSeq genome assembly accession identifier",
    "detect_identifier_schemes": "detect identifier schemes",
    "LCNAF": "LACNAF ID",
    "VIAF": "VIAF ID",
    "SNAC": "SNAC ID"
};
let i = 1;
for (let k of Object.keys(identifier_types)) {
    console.log(`## ${i}. How do I write a validator, verifier and normalize functions for ${identifier_types[k]} in Deno and TypeScript? What is the copyright or attribution requirements to use this code?`);
    console.log("");
    i++;
}
~~~

I modified the DOI question to include verification via CrossRef and DataCite as the first results only include verification via CrossRef and our DOI spread over both systems. I manually added questions for CiteProc support.

The resulting reference document is [chatgpt_dialog.md](chatgpt_dialog.md).
